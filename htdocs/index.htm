<html>
<head>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="/css/bootstrap-theme.min.css">
    <script src="/js/jquery-1.11.2.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="//cdn.datatables.net/1.10.6/js/jquery.dataTables.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/dataTables.bootstrap.css" />
    <script src="/js/dataTables.bootstrap.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/master.css" />
    <link rel="stylesheet" type="text/css" href="/css/graph.css" />
    <link rel="stylesheet" type="text/css" href="/css/bootsnips.css" />
    <link rel="stylesheet" type="text/css" href="/css/featherlight.css" />
    <script src="/js/bootstrap-select.js" ></script>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap-select.min.css" />
    <script src="/js/lodash.min.js"></script>
    <script src="/js/docker.js"></script>
    <script src="/js/featherlight.js"></script>
    <script src="/js/gauge.js"></script>
    <script src="/js/d3.v3.min.js" charset="utf-8"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="http://lipis.github.io/bootstrap-sweetalert/lib/sweet-alert.js"></script>
    <link rel="stylesheet" href="http://lipis.github.io/bootstrap-sweetalert/lib/sweet-alert.css">
    
    <title>Docker Controller</title>
</head>
<body>
    <div class="tabbable-panel">
        <div class="tabbable-line">
            <ul class="nav nav-tabs" id="pageNavList">
                <li class="active" ><a id="showContainers" href="#container_tab" data-toggle="tab" aria-controls="home" role="tab" >Containers</a></li>
                <li><a href="#image_tab" id="showImages" data-toggle="tab" aria-controls="home" role="tab">Images</a></li>
            </ul>
            <div class='tab-content' id="main-content-tabs">
                <div id="container_tab" class="tab-pane active container-fluid status" >
                    <table id="container_table" class="table table-bordred table-striped table-hover">
                        <tbody id="container_list">
                            
                        </tbody>
                    </table>
                </div>
                <div id="image_tab" class="tab-pane container-fluid status" style="max-height:600px">
                    <table id="image_table" class="table table-bordred table-striped table-hover">
                        <tbody id="image_list">
                            
                        </tbody>
                    </table>
                 </div>
           </div>
        </div>
    </div>
    <script type='text/template' id="container_buttons">
                <% if(container.Status.match(/^Up/)){  var stoppedDisplay = "none"; var runningDisplay="inline" }else{ var stoppedDisplay = "inline"; var runningDisplay="none" }%>
                <span class="stoppedControls" style="display:<%- stoppedDisplay %>">
                    <button class="btn btn-default btn-sm deleteContainer" data-container="<%- container.Id %>"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                    <button class="btn btn-default btn-sm startContainer" data-container="<%- container.Id %>"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>
                </span>
                <span class="runningControls" style="display:<%- runningDisplay %>">
                    <button class="btn btn-default btn-sm restartContainer" data-container="<%- container.Id %>"><span class="glyphicon glyphicon-repeat" aria-hidden="true"></span></button>
                    <button class="btn btn-default btn-sm pauseContainer <%if(container.Status.match(/Paused/)){%>active<%}%>" data-container="<%- container.Id %>"><span class="glyphicon glyphicon-pause" aria-hidden="true"></span></button>
                    <button class="btn btn-default btn-sm stopContainer" data-container="<%- container.Id %>"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span></button>
                </span>
                <div class="btn-group pull-right">
                    <button class="btn btn-default btn-sm getContainerLogs" data-container="<%- container.Id %>" data-toggle="modal" data-target="#container_logs"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span></button>
                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></button>
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a role="menuitem" data-container="<%- container.Id %>" data-toggle="modal" data-target="#inspect_container">
                                <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Inspect
                            </a>
                        </li>
                        <li>
                            <a role="menuitem" data-container="<%- container.Id %>" data-toggle="modal" data-target="#container_top">
                                <span class="glyphicon glyphicon-tasks" aria-hidden="true"></span> Top
                            </a>
                        </li>
                    </ul>
                </div>
                
    </script>
    <script type='text/template' id="image_template">
    <% _.forEach(images, function(image){ %>
        <tr id="<%- image.id %>">
            <td>
            </td>
            <td><%- image.RepoTags[0] %></td>
            <td><%- new Date(image.Created * 1000).toISOString() %></td>
        </tr>
    <% }); %>
    </script>
    <script type='text/template' id="containerProcessesTemplate">
        <thead>
            <tr>
                <% _.forEach(Titles, function(title){ %>
                    <th><%- title %></th>
                <% }); %>
            </tr>
        </thead>
        <tbody>
            <% _.forEach(Processes, function(proccess){ %>
                <tr>
                    <% _.forEach(proccess, function(field){ %>
                        <td>
                            <%- field %>
                        </td>
                    <% }); %>
                </tr>
            <% }); %>
        </tbody>
    </script>
    <script type='text/template' id="inspectContainerTempalte">
        <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label">Name</label>
            <div class="col-sm-8 well well-sm">
                <%- Name %>
            </div>
        </div>
        <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label">ID</label>
            <div class="col-sm-8 well well-sm">
                <%- Id %>
            </div>
        </div>
        <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label">Image</label>
            <div class="col-sm-8 well well-sm">
                <%- Config.Image %>
            </div>
        </div>
        <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label">Created</label>
            <div class="col-sm-8 well well-sm">
                <%- Created %>
            </div>
        </div>
        <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label">IP Address</label>
            <div class="col-sm-8 well well-sm">
                <%- NetworkSettings.IPAddress %>
            </div>
        </div>
    </script>
    
    <div class="modal fade" id="container_logs" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" style="width:90%">
            <div class="modal-content">
                <div class="log_controls modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <div class="container-fluid">
                        <div class="row">
                            <div class="btn-group col-md-5" data-toggle="buttons">
                                <label class="btn btn-info active">
                                        <input type="checkbox" autocomplete="off" checked>
                                        STDOUT
                                </label>
                                <label class="btn btn-warning">
                                        <input type="checkbox" autocomplete="off">
                                        STDERR
                                </label>
                            </div>
                            <div class="input-group col-md-3" data-toggle="buttons">
                                <input type="number" class="form-control log_lines" value=20 id="log_lines">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-body container-fluid">
                    <div class="well well-sm row" style="overflow:auto;min-height:300px; max-height: 650px">
                        <ul id="logs_output" class="list-unstyled col-md-12"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="inspect_container" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="log_controls modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Inspect Container</h4>
                </div>
                <div class="modal-body">
                    <div id="inspect_ouput" class="form-horizontal"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="container_top" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="log_controls modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Container Top Processes</h4>
                </div>
                <div class="modal-body">
                    <table class="table table-hover table-condensed" id="proccess_list"></table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

